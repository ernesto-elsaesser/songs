<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <style>
    .beat {
        display: inline-block;
        width: 25px;
        height: 55px;
    }
    .chord {
        font-size: 12px;
        margin-bottom: 5px;
    }
  </style>
</head>

<body>

  <select id="picker" style="margin: 10px; padding: 5px; font-size: 16px" onchange="update()">
    <option value="#wolken">Über den Wolken</option>
    <option value="#schnee">Schneeflöckchen</option>
    <option value="#kuckuck">Der Winter ist vorüber</option>
  </select>

  <div id="sheet" style="margin: 40px; font-family: monospace; font-size: 24px;"></div>

  <script>

    let picker = document.getElementById("picker")
    let sheet = document.getElementById("sheet")

    function update() {
        document.location.hash = picker.value
        let song = SONGS[picker.value]
        sheet.innerHTML = ""
        for (let line of song) {
            let row = document.createElement("div")
            var i = 0
            while (i < line.length) {
                let beat = document.createElement("div")
                beat.className = "beat"
                sheet.appendChild(beat)
                let note = line[i]
                i += 1
                var chord = ""
                if (line[i] == "(") {
                    i += 1
                    while (line[i] != ")") {
                        chord += line[i]
                        i += 1
                    }
                    i += 1
                }
                beat.innerHTML = '<div class=chord>' + chord + "</div><div>" + note + "<div>"
                row.appendChild(beat)
            }
            sheet.appendChild(row)
        }
    }

    SONGS = {
        "#schnee": [
            "efg(C/e)g ad(G/d)d def(Dm)f ge(C)",
            "efg(C/e)g cb(F)a gfe(C/e)f d(G/d)c(C)"
        ],
        "#kuckuck": [
            "gc(C/e)dedc(C/e)c gc(C/e)defd(G/d) dd(G/d)cbag(G/d)g gg(G/d)gabc(C/e)",
            "ge ge ga(F)gfed(G/d) dd(G/d)cbag(G/d)g gg(G/d)gabc(C/e)"
        ],
        "#wolken": [
            "gac(C)aged(Dm) -(G/d) ggggggf(C/e)e",
            "gac(C)aged(Dm) -(G/d) ggggggf(C/e)e",
            "e(C)eecbcd(Dm) -(G/d) ddedcdf(C/e)e",
            "gac(C)aged(Dm) -(G/d) ddfed(C)c",
            "c(C)bcca(F/c) -(G/d) dddeff(F)ecg(C/e)",
            "c(Am/e)cccdee(Dm/f)ded -(G/d) bbbbbdd(C/e)cdc",
            "a(F)aaaacg(C/e)eee -(G/d) ddfedc(C)"
        ],
    }

    if (document.location.hash.length < 2) document.location.hash = "#wolken"
    picker.value = document.location.hash
    update()

  </script>
</body>

</html>